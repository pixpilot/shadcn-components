{
  "$schema": "https://unpkg.com/@pixpilot/scaffoldfy@latest/schema/scaffoldfy.schema.json",
  "extends": [
    "https://unpkg.com/@pixpilot/scaffoldfy-configs@latest/project-info/scaffoldfy.json",
    "https://unpkg.com/@pixpilot/scaffoldfy-configs@latest/pixpilot-info/scaffoldfy.json",
    "https://unpkg.com/@pixpilot/scaffoldfy-configs@latest/turbo-workspace-package-generator/scaffoldfy.json",
    "https://unpkg.com/@pixpilot/scaffoldfy-configs@latest/pixpilot-changesets-release/scaffoldfy.json",
    "https://unpkg.com/@pixpilot/scaffoldfy-configs@latest/license-file/scaffoldfy.json",
    "https://unpkg.com/@pixpilot/scaffoldfy-configs@latest/update-root-package-json/scaffoldfy.json",
    "https://unpkg.com/@pixpilot/scaffoldfy-configs@latest/security-policy/scaffoldfy.json",
    "https://unpkg.com/@pixpilot/scaffoldfy-configs@latest/pixpilot-copilot-instructions/scaffoldfy.json",
    "https://unpkg.com/@pixpilot/scaffoldfy-configs@latest/monorepo-generate-packages-section/scaffoldfy.json"
  ],
  "name": "pnpm-turbo-monorepo-template-setup",
  "prompts": [
    {
      "id": "keepExamplePackages",
      "type": "confirm",
      "message": "Keep example packages? (helpful for reference)",
      "default": false
    },
    {
      "id": "createFirstPackagePrompt",
      "type": "confirm",
      "message": "Create the first package now?",
      "default": true
    }
  ],
  "tasks": [
    {
      "id": "clean-readme",
      "name": "Clean README",
      "description": "Create a fresh README for the new project",
      "type": "write",
      "config": {
        "file": "README.md",
        "templateFile": "./templates/clean-readme.hbs"
      }
    },
    {
      "id": "update-contributing",
      "name": "Update CONTRIBUTING.md",
      "description": "Update contributing guidelines with project info",
      "type": "replace-in-file",
      "config": {
        "file": "CONTRIBUTING.md",
        "replacements": [
          {
            "find": "<projectName>",
            "replace": "{{projectName}}"
          }
        ]
      }
    },
    {
      "id": "handle-example-packages",
      "name": "Handle example packages",
      "description": "Prompt user about keeping example packages and remove if not wanted",
      "type": "delete",
      "config": {
        "condition": "!keepExamplePackages",
        "paths": ["packages/example-package"]
      }
    },
    {
      "id": "remove-setup-script",
      "name": "Remove setup script",
      "description": "Remove the setup script from package.json after setup is complete",
      "type": "regex-replace",
      "config": {
        "file": "package.json",
        "pattern": "\\n\\s*\"setup\":\\s*\"npx @pixpilot/scaffoldfy --config \\./setup/scaffoldfy\\.json\",",
        "flags": "",
        "replacement": ""
      }
    },
    {
      "id": "delete-setup-tasks",
      "name": "Delete setup tasks file",
      "description": "Remove the setup-tasks.json file after setup is complete",
      "type": "delete",
      "config": {
        "paths": ["setup"]
      }
    },
    {
      "id": "create-first-package",
      "name": "Create first package",
      "description": "Generate the first package in the monorepo using the package generator",
      "type": "exec",
      "config": {
        "command": "pnpm run turbo:gen:init",
        "condition": "createFirstPackagePrompt"
      }
    },
    {
      "id": "reinstall-dependencies",
      "name": "Reinstall dependencies",
      "description": "Reinstall dependencies after cleanup",
      "type": "exec",
      "config": {
        "command": "pnpm install"
      }
    }
  ]
}
